{{ define "content" }}
<h1 class="title is-1">Game {{ .id }}</h1>

<!-- If the game has started -->
{{ if .gameState.Started }}
<nav class="level">
  <div class="level-item has-text-centered">
    <div>
      <p class="heading">Blue</p>
      <p class="title">{{ .gameState.BlueGoals }}</p>
    </div>
  </div>
  <div class="level-item has-text-centered">
    <div>
      <p class="heading">Red</p>
      <p class="title">{{ .gameState.RedGoals }}</p>
    </div>
  </div>
</nav>

{{ if not .gameState.Ended }}
<h4 class="title is-4">Mark Goal</h4>

<!-- Blue Team -->
<div class="buttons has-addons">
  <!-- Forward -->
  <a href="/game/{{ .id }}/goal?team=blue&position=forward" class="button is-info">{{ .gameState.BlueForward.Username }}</a>

  <!-- Goalie -->
  <a href="/game/{{ .id }}/goal?team=blue&position=goalie" class="button is-info is-outlined">{{ .gameState.BlueGoalie.Username }}</a>
</div>

<!-- Red Team -->
<div class="buttons has-addons">
  <!-- Forward -->
  <a href="/game/{{ .id }}/goal?team=red&position=forward" class="button is-danger">{{ .gameState.RedForward.Username }}</a>

  <!-- Goalie -->
  <a href="/game/{{ .id }}/goal?team=red&position=goalie" class="button is-danger is-outlined">{{ .gameState.RedGoalie.Username }}</a>
</div>

<!-- End Game -->
<h4 class="title is-4">End Game</h4>
<a href="/game/{{ .id }}/end" class="button is-danger is-fullwidth">
  End Game
</a>

<!-- end If game not ended -->
{{ end }}

<!-- Timeline -->
<h4 class="title is-4 mt" style="text-align: center">History</h4>
<div class="timeline is-centered">
  <header class="timeline-header">
    <span class="tag is-medium is-primary">Start</span>
  </header>
  {{ range.events }}

  <!-- Game Start -->
  {{ if eq .EventType "start" }}
  <header class="timeline-header">
    <span class="tag is-info">Game Start</span>
  </header>

  <!-- Game End -->
  {{ else if eq .EventType "end" }}
  <header class="timeline-header">
    <span class="tag is-primary">Game End</span>
  </header>

  <!-- Else if event type start -->
  {{ else }}
  <div class="timeline-item {{ if eq .Team "blue" }}is-info{{ else if eq .Team "red" }}is-danger{{ end }}" style="padding-bottom: 0.5rem">
    {{ if eq .EventType "goal" }}
    <div class="timeline-marker is-image is-32x32">
      {{ if eq .Team "blue" }}
      <img src="/assets/soccer_ball_blue.svg" alt="Blue Team Scored">
      {{ else if eq .Team "red" }}
      <img src="/assets/soccer_ball_red.svg" alt="Red Team Scored">
      {{ end }}
    </div>
    {{ else if eq .EventType "ptp" }}
    <div class="timeline-marker is-image is-32x32">
      <img src="/assets/enter.svg" alt="Joined">
    </div>
    {{ else }}
    <div class="timeline-marker is-primary"></div>
    {{ end }}
    <div class="timeline-content">
      <!-- Player Take Position -->
      {{ if eq .EventType "ptp" }}
      <p class="heading">
        {{ if eq .Team "blue" }}Blue{{ else }}Red{{ end }} {{ if eq .Position "forward" }}Forward{{ else }}Goalie{{ end }} Joined
      </p>
      <div class="is-flex align-items-center">
        <figure class="mr image is-16x16"><img src="{{ .User.PictureURL }}" alt="User Avatar" class="is-rounded" /></figure>
        <span>{{ .User.Username }}</span>
      </div>

      <!-- Goal -->
      {{ else if eq .EventType "goal" }}
      <p class="heading">{{ if eq .Team "blue" }}Blue{{ else }}Red{{ end }} Team Scored</p>
      <div class="is-flex align-items-center">
        <figure class="mr image is-16x16"><img src="{{ .User.PictureURL }}" alt="User Avatar" class="is-rounded" /></figure>
        <span>{{ .User.Username }}</span>
      </div>

      <!-- Start -->
      {{ else if eq .EventType "start" }}
      <p class="heading">Game Started</p>

      <!-- End -->
      {{ else if eq .EventType "end" }}
      <p class="heading">Game Finished</p>
      {{ end }}
    </div>
  </div>

  <!-- End if event type start -->
  {{ end }}

  <!-- End range events -->
  {{ end }}
</div>

<!-- else if not game started -->
{{ else }}

<h3 class="title is-3">The game has not started yet!</h3>
<a href="/game/{{ .id }}/start" class="button is-danger is-large is-fullwidth">
  Start
</a>
<!-- end if game started -->
{{ end }}

<!-- end define content -->
{{ end }}
